### 双亲委派模型

**双亲委派模型(Parents Delegation Model):**

* 定义:当一个类加载器接收到一个类的加载任务时，它并不会立即展开加载，而是将加载器任务委派给它的超类加载器去执行，每一层的类加载器都采用相同的方式，直至委派给最顶层的启动类加载器为止；如果超类加载器无法加载委派给它的类时，将加载任务退回给它的下一级类加载器去执行加载；
* 按照双亲委派模型的规则，除了启动类加载器之外，所有的类加载器都拥有一个超类加载器
示意图：
![](/assets/201708050023.png)


####优点 ####
* 能够有效确保一个类的全局唯一性(同一个类只会被加载一次)

#### java.lang.ClassNotFoundException ####
显示调用下面两种方式可能会导致类加载异常:
- Class.forName()
- ClassLoader.getSystemClassLoader().loadClass()

####知识点 ####
* JAVA虚拟机规范并没有要求类加载器的加载机制一定要使用双亲委派模型，只是建议采用这种方式
* 比如Tomcat就是自行实现了类加载机制(当默认的类加载器接收到一个类的加载任务时先自行加载，当加载失败时才会委派给它的超类加载器执行加载，这同时也是Servlet规范推荐的一种做法)
* 程序中如果没有显示指定类加载器，AppClassLoader就是任务委派的发起者